<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Ch08 오픈챌린지</title>
  <style>
    span {
      font-size: 3em;
      color: blue;
      padding: 0.3em;
      margin: 0.2em;
      border: 1px solid gray;
      cursor: pointer;
    }
    #regame {
      color: magenta;
      border: 1px solid gray;
      cursor: pointer;
    }
  </style>
</head>

<body>
  <h3>갬블링 게임</h3>
  <p>각 숫자를 클릭하면 0에서 2 사이의 난수로 바뀝니다. 모두 같은 수가 나오면 승리합니다.</p>
  <hr>
  <br><br>
  <div id="parent">
    <span id="num1" onclick="game(1)">0</span>
    <span id="num2" onclick="game(2)">0</span>
    <span id="num3" onclick="game(3)">0</span>
  </div>
  <br>
  <p id="regame" onclick="reset()"></p>
  <script>
    function game(index) {
      var a = document.getElementById("num1");
      var b = document.getElementById("num2");
      var c = document.getElementById("num3");
      if (index == 1) {
        a.innerHTML = Math.floor(Math.random()*3);
        exit();
      }
      if (index == 2) {
        b.innerHTML = Math.floor(Math.random()*3);
        exit();
      }
      if (index == 3) {
        c.innerHTML = Math.floor(Math.random()*3);
        /* 정답일 경우 */
        if ((a.innerHTML == b.innerHTML) && (b.innerHTML == c.innerHTML)) {
          document.getElementById("regame").innerHTML = "Success(click here to do again)";
        } else {  // 오답인 경우
          document.getElementById("regame").innerHTML = "fail(click here to do again)";
        }
      }
    }

    /* 게임 리셋 후 재시작 */
    function reset() {
      var x = document.getElementsByTagName("span");
      for(var i=0; i<x.length; i++)
        x[i].innerHTML = 0;
      var y = document.getElementById("regame").innerHTML = "";
    }
  </script>
</body>

</html>
